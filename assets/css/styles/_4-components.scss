//
// accordion
//
.accordion {
	.section--header {
		cursor: pointer;
		position: relative;

		&:after {
			content: '';
			border: solid $black;
			border-width: 0 1px 1px 0;
			display: inline-block;
			padding: 0.15em;
			position: absolute;
			top: 0.3em;
			right: 0.2rem;
			transform: rotate(45deg);
			-webkit-transform: rotate(45deg);
			pointer-events: none;
		}

	}
	.section--content {
		max-height: 0;
		overflow: hidden;
		transition: 200ms max-height ease;
	}
	&.open {
		.section--header:after {
			top: 0.5em;
			transform: rotate(-135deg);
			-webkit-transform: rotate(-135deg);
		}
		.section--content {
			display: block;
			max-height: 10000px;
		}
	}
}
.black .accordion .section--header:after {
	border-color: $white;
}

.tour,
.tourstop {
	.accordion {
		.section--header {
			&:after {
				top: 0.8em;
				right: 0.7rem;
			}
		}
		&.open {
			.section--header:after {
				top: 1em;
			}
		}
	}
}

//
// cards layout
//

.cards {
	display: flex;
	flex-wrap: wrap;
	li {
		display: flex;
		box-sizing: border-box;
		a {
			width: 100%;
			height: 100%;
			figure {
				flex: 1;
				align-content: center;
				justify-content: center;
				display: flex;
				overflow: hidden;
				img {
					display: block;
					object-fit: contain;
					object-position: center;
					transition: opacity 300ms ease;
					align-self: center;
				}
			}
			.title {
				width: 100%;
			}
		}
	}
	&.columns-1 li {
		width: 100%;
	}
	&.columns-2 {
		li {
			width: 50%;
		}
	}
	&.columns-3 li {
		width: 33.3%;
	}
	&.columns-4 li {
		width: 25%;
	}
	&.count-1 li {
		width: 100%;
	}
	.card[class*="col-3"] figure {
		height: 15vw;
		min-height: unset;
		max-height: unset;
		img {
			width: auto;
			max-width: unset;
			min-width: unset;
			height: 100%;
			max-height: unset;
			min-height: 100%;
		}
	}
	.card[class*="col-6"] figure {
		height: auto;
		max-height: 60vw;
	}
}

.card.image.panorama {
	figure {
		img {
			min-height: 140%;
			min-width: 140%;
			width: auto;
			height: auto;
		}
	}
}

body.black .cards {
	.card.\33 d,
	.card.image.panorama,
	.card.image.object {
		figure {
			img {
				mix-blend-mode: screen;
				filter: contrast(125%);
			}
		}
	}
	.card.\33 d,
	.card.image.object {
		> a {
			display: flex;
			flex-direction: column;
		}
		figure {
			flex: 1;
			img {
				align-self: unset;
				object-fit: contain;
				object-position: center;
			}
		}
	}
}

.fixed-card-height {
	.card[class*="col"] {
		figure {
			flex: unset !important;
			height: 15vw;
			min-height: unset;
			max-height: unset;
			img {
				min-width: 100%;
				min-height: 100%;
				width: auto;
				height: auto;
				object-fit: unset;
			}
		}
		.placeholder {
			height: 15vw;
		}
		.title {
			white-space: nowrap;
			text-overflow: ellipsis;
			overflow: hidden;
		}
	}
}

//
// gallery
//
.gallery {
	padding: 1px;
	.card {
		figure {
			img {
				display: block;
				width: 100%;
				height: auto;
			}
		}
		a.open {
			float: right;
			font-family: $mono;
			text-transform: uppercase;
			&:after {
				content: '';
				clear: both;
				display: table;
			}
		}
	}
	.preview.audio {
		background-color: $dark;
	}
}

//
// table layout
//
dl.table {
	> div {
		border-top: $border-thin;
		padding: $padding 0;
		display: flex;
		flex-wrap: wrap;
		div {
			flex: 1 0 50%;
		}
		dt + div {
			flex-basis: 100%;
			margin-top: $padding-text-top;
		}
	}
	a {
		display: inline;
	}
	dt { // key
		flex: 1 0 50%;
		&.empty {
			display: none;
			padding: 0;
		}
	}
	dd { // value
		flex: 1 0 50%;
		&.long {
			flex: 1 0 100%;
		}
	}
	dd + dd,
	dd.long p + p,
	dt + dd.long p {
		margin-top: $padding-text-top;
	}
	dt.empty + dd.long p {
		margin-top: 0;
	}
}
.black {
	dl.table > div {
		border-color: $white;
	}
}

//
// list layout
//
$thumbnailSize: 2.3em;
.list .card,
.gallery .card.worlditem {
	display: flex;
	height: $thumbnailSize;
	a {
		flex: 1;
		display: flex;
	}

	figure {
		order: -1;
		width: $thumbnailSize;
		height: $thumbnailSize;
		display: flex;
		overflow: hidden;
		img {
			object-position: center;
			object-fit: cover;
		}
	}
	.title {
		flex: 1;
		align-self: center;
		padding: $padding-text-inside;
	}
}

//
// list count
//
.card {
	.count {
		display: inline-block;
		color: $grey;
		font-size: $font-small;
		padding: $padding-text-inside;
		align-self: center;
		text-align: right;
		&:after {
			content: 'â†’';
			padding-left: 0.2em;
		}
	}
}
.cards .card {
	.count {
		float: right;
	}
	.count > .title {
		clear: both;
	}
}

.presentation .list {
	padding-right: 4px;
}

body.black {
	.presentation.collection .grid {
		padding-top: 1px;
	}
}

.cards.grid {
	padding: 2px;
}
.cards,
.gallery {
	.card {
		padding: 2px;
	}
}
.list {
	.card + .card {
		margin-top: 2px;
	}
}

.card {
	h1, h2, h3, h4, h5, h6, p {
		margin: $padding 0;
	}
}
