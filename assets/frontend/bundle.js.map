{"version":3,"file":"bundle.js","sources":["../../site/plugins/frontend/assets/node_modules/svelte/internal/index.mjs","../../site/plugins/frontend/assets/node_modules/svelte/easing/index.mjs","../../site/plugins/frontend/assets/node_modules/svelte/transition/index.mjs","../../site/plugins/frontend/assets/node_modules/svelte/store/index.mjs","../../site/plugins/frontend/assets/src/router/historyStore.js","../../site/plugins/frontend/assets/src/router/pageStore.js","../../site/plugins/frontend/assets/src/router/utilities.js","../../site/plugins/frontend/assets/src/router/loadData.js","../../site/plugins/frontend/assets/src/router/navigateTo.js","../../site/plugins/frontend/assets/src/liebling-house/replaceContent.js","../../site/plugins/frontend/assets/src/router/Link.svelte","../../site/plugins/frontend/assets/src/components/navigation/historyBar.svelte","../../site/plugins/frontend/assets/src/components/navigation/archiveBar.svelte","../../site/plugins/frontend/assets/src/components/collection/card.svelte","../../site/plugins/frontend/assets/src/components/collection/cards.svelte","../../site/plugins/frontend/assets/src/components/collection/list.svelte","../../site/plugins/frontend/assets/src/views/transcript.svelte","../../site/plugins/frontend/assets/src/views/video.svelte","../../site/plugins/frontend/assets/src/views/audio.svelte","../../site/plugins/frontend/assets/src/components/collection/gallery.svelte","../../site/plugins/frontend/assets/src/views/collection.svelte","../../site/plugins/frontend/assets/src/templates/archive.svelte","../../site/plugins/frontend/assets/src/components/tabs/header.svelte","../../site/plugins/frontend/assets/src/components/collection/entityinfo.svelte","../../site/plugins/frontend/assets/src/components/tabs/collection.svelte","../../site/plugins/frontend/assets/src/components/tabs/table.svelte","../../site/plugins/frontend/assets/src/components/tabs/text.svelte","../../site/plugins/frontend/assets/src/views/image.svelte","../../site/plugins/frontend/assets/src/helpers/loadScript.svelte","../../site/plugins/frontend/assets/src/views/map.svelte","../../site/plugins/frontend/assets/src/views/3d.svelte","../../site/plugins/frontend/assets/src/views/panorama.svelte","../../site/plugins/frontend/assets/src/templates/entity.svelte","../../site/plugins/frontend/assets/src/liebling-house/pagination.svelte","../../site/plugins/frontend/assets/src/liebling-house/world.svelte","../../site/plugins/frontend/assets/src/liebling-house/template.svelte","../../site/plugins/frontend/assets/src/router/popState.js","../../site/plugins/frontend/assets/src/router/clickAnyLink.js","../../site/plugins/frontend/assets/src/App.svelte","../../site/plugins/frontend/assets/src/router/loadPage.js","../../site/plugins/frontend/assets/src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction validate_store(store, name) {\n    if (!store || typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, callback) {\n    const unsub = store.subscribe(callback);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, fn) {\n    return definition[1]\n        ? assign({}, assign(ctx.$$scope.ctx, definition[1](fn ? fn(ctx) : {})))\n        : ctx.$$scope.ctx;\n}\nfunction get_slot_changes(definition, ctx, changed, fn) {\n    return definition[1]\n        ? assign({}, assign(ctx.$$scope.changed || {}, definition[1](fn ? fn(changed) : {})))\n        : ctx.$$scope.changed || {};\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nlet running = false;\nfunction run_tasks() {\n    tasks.forEach(task => {\n        if (!task[0](now())) {\n            tasks.delete(task);\n            task[1]();\n        }\n    });\n    running = tasks.size > 0;\n    if (running)\n        raf(run_tasks);\n}\nfunction clear_loops() {\n    // for testing...\n    tasks.forEach(task => tasks.delete(task));\n    running = false;\n}\nfunction loop(fn) {\n    let task;\n    if (!running) {\n        running = true;\n        raf(run_tasks);\n    }\n    return {\n        promise: new Promise(fulfil => {\n            tasks.add(task = [fn, fulfil]);\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    // eslint-disable-next-line @typescript-eslint/no-object-literal-type-assertion\n    const target = {};\n    for (const k in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    for (const key in attributes) {\n        if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key in node) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group) {\n    const value = [];\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.push(group[i].__value);\n    }\n    return value;\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            for (let j = 0; j < node.attributes.length; j += 1) {\n                const attribute = node.attributes[j];\n                if (!attributes[attribute.name])\n                    node.removeAttribute(attribute.name);\n            }\n            return nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    if (value != null || input.value) {\n        input.value = value;\n    }\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\nfunction add_resize_listener(element, fn) {\n    if (getComputedStyle(element).position === 'static') {\n        element.style.position = 'relative';\n    }\n    const object = document.createElement('object');\n    object.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n    object.type = 'text/html';\n    object.tabIndex = -1;\n    let win;\n    object.onload = () => {\n        win = object.contentDocument.defaultView;\n        win.addEventListener('resize', fn);\n    };\n    if (/Trident/.test(navigator.userAgent)) {\n        element.appendChild(object);\n        object.data = 'about:blank';\n    }\n    else {\n        object.data = 'about:blank';\n        element.appendChild(object);\n    }\n    return {\n        cancel: () => {\n            win && win.removeEventListener && win.removeEventListener('resize', fn);\n            element.removeChild(object);\n        }\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nclass HtmlTag {\n    constructor(html, anchor = null) {\n        this.e = element('div');\n        this.a = anchor;\n        this.u(html);\n    }\n    m(target, anchor = null) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(target, this.n[i], anchor);\n        }\n        this.t = target;\n    }\n    u(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    p(html) {\n        this.d();\n        this.u(html);\n        this.m(this.t, this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nlet stylesheet;\nlet active = 0;\nlet current_rules = {};\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    if (!current_rules[name]) {\n        if (!stylesheet) {\n            const style = element('style');\n            document.head.appendChild(style);\n            stylesheet = style.sheet;\n        }\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    node.style.animation = (node.style.animation || '')\n        .split(', ')\n        .filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    )\n        .join(', ');\n    if (name && !--active)\n        clear_rules();\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        let i = stylesheet.cssRules.length;\n        while (i--)\n            stylesheet.deleteRule(i);\n        current_rules = {};\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = current_component;\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nfunction flush() {\n    const seen_callbacks = new Set();\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (dirty_components.length) {\n            const component = dirty_components.shift();\n            set_current_component(component);\n            update(component.$$);\n        }\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                callback();\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n}\nfunction update($$) {\n    if ($$.fragment) {\n        $$.update($$.dirty);\n        run_all($$.before_update);\n        $$.fragment.p($$.dirty, $$.ctx);\n        $$.dirty = null;\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = key && { [key]: value };\n        const child_ctx = assign(assign({}, info.ctx), info.resolved);\n        const block = type && (info.current = type)(child_ctx);\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            flush();\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = { [info.value]: promise };\n    }\n}\n\nconst globals = (typeof window !== 'undefined' ? window : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, changed, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(changed, child_ctx);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction measure(blocks) {\n    const rects = {};\n    let i = blocks.length;\n    while (i--)\n        rects[blocks[i].key] = blocks[i].node.getBoundingClientRect();\n    return rects;\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args) {\n    const attributes = Object.assign({}, ...args);\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === undefined)\n            return;\n        if (value === true)\n            str += \" \" + name;\n        const escaped = String(value)\n            .replace(/\"/g, '&#34;')\n            .replace(/'/g, '&#39;');\n        str += \" \" + name + \"=\" + JSON.stringify(escaped);\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    if (component.$$.props.indexOf(name) === -1)\n        return;\n    component.$$.bound[name] = callback;\n    callback(component.$$.ctx[name]);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    if (component.$$.fragment) {\n        run_all(component.$$.on_destroy);\n        component.$$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        component.$$.on_destroy = component.$$.fragment = null;\n        component.$$.ctx = {};\n    }\n}\nfunction make_dirty(component, key) {\n    if (!component.$$.dirty) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty = blank_object();\n    }\n    component.$$.dirty[key] = true;\n}\nfunction init(component, options, instance, create_fragment, not_equal, prop_names) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const props = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props: prop_names,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty: null\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, props, (key, ret, value = ret) => {\n            if ($$.ctx && not_equal($$.ctx[key], $$.ctx[key] = value)) {\n                if ($$.bound[key])\n                    $$.bound[key](value);\n                if (ready)\n                    make_dirty(component, key);\n            }\n            return ret;\n        })\n        : props;\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    $$.fragment = create_fragment($$.ctx);\n    if (options.target) {\n        if (options.hydrate) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment.l(children(options.target));\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement !== 'undefined') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set() {\n            // overridden by instance, if it has props\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set() {\n        // overridden by instance, if it has props\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, detail));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_element, claim_space, claim_text, clear_loops, component_subscribe, createEventDispatcher, create_animation, create_bidirectional_transition, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_function, is_promise, listen, listen_dev, loop, measure, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, validate_component, validate_store, xlink_attr };\n","export { identity as linear } from '../internal';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { cubicInOut, cubicOut } from '../easing';\nimport { is_function, assign } from '../internal';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * amount}px);`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400 }) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut }) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const height = parseFloat(style.height);\n    const padding_top = parseFloat(style.paddingTop);\n    const padding_bottom = parseFloat(style.paddingBottom);\n    const margin_top = parseFloat(style.marginTop);\n    const margin_bottom = parseFloat(style.marginBottom);\n    const border_top_width = parseFloat(style.borderTopWidth);\n    const border_bottom_width = parseFloat(style.borderBottomWidth);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `overflow: hidden;` +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `height: ${t * height}px;` +\n            `padding-top: ${t * padding_top}px;` +\n            `padding-bottom: ${t * padding_bottom}px;` +\n            `margin-top: ${t * margin_top}px;` +\n            `margin-bottom: ${t * margin_bottom}px;` +\n            `border-top-width: ${t * border_top_width}px;` +\n            `border-bottom-width: ${t * border_bottom_width}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut }) {\n    const len = node.getTotalLength();\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `stroke-dasharray: ${t * len} ${u * len}`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, {\n                rect: node.getBoundingClientRect()\n            });\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const { rect } = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(rect, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","import { safe_not_equal, noop, run_all, is_function } from '../internal';\nexport { get_store_value as get } from '../internal';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe,\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n * @param {Stores} stores input stores\n * @param {function(Stores=, function(*)=):*}fn function callback that aggregates the values\n * @param {*=}initial_value when used asynchronously\n */\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => store.subscribe((value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { writable } from 'svelte/store';\nexport const historyStore = writable([]);\n\nexport function historyStoreAdd( state ){\n  historyStore.update(h => [...h, state]);\n}\nexport function historyStoreReplaceLast( state ){\n  historyStore.update( h => {\n    h[h.length-1] = state;\n    return h;\n  });\n}\nexport function historyStoreRemoveLast(){\n  historyStore.update( h => {\n\t\th.pop();\n\t\treturn h;\n\t});\n}\n","import { writable } from 'svelte/store';\nexport const pageStore = writable({\n\ttitle: document.title,\n\turl: window.location.href\n});\n\nexport function pageStoreSet( pageObject ){\n\tpageStore.set( pageObject );\n}\n\nexport function pageStoreReplaceProperties( properties ){\n\tpageStore.update( page => {\n\t\tfor (var key in properties) {\n\t\t\tpage[key] = properties[key];\n\t\t}\n\t\treturn page;\n\t});\n}\n","export function createStateObject( obj ){\n  return {\n    url: obj.url,\n    title: obj.title || obj.url.split('/').pop(),\n    template: obj.template || false,\n    worlditem: obj.worlditem || false\n  };\n}\n\nexport function assumeTemplate( pathname ){\n  if( pathname === '' || pathname === '/' ){\n    return false;\n  } else if( pathname.match(/^\\/?archive\\/.+\\/.+/) ){\n\t\treturn 'entity';\n\t} else if( pathname.match(/^\\/?archive.*/) ){\n\t\treturn 'archive';\n\t}\n\treturn false;\n}\n\nexport function assumeTitle( href ){\n\n\t// from query\n\tlet matches = href.search.match(/research=([^&]*)/);\n\tif( matches ){\n\t\treturn matches[0].replace('research=','');\n\t}\n\n\t// from last slug\n\tif( href.pathname ){\n\t\tlet slugs = href.pathname.split('/');\n\t\treturn slugs.pop();\n\t}\n\n\treturn '';\n\n}\n","function readHeader( header ){\n\tif( header.includes('json') ){\n\t\t return 'json';\n\t}\n\treturn 'html';\n}\n\nexport async function loadData( url ){\n\n\turl = url.replace( '.json', '' );\n\n\tconst location = new URL( url );\n\turl = location.origin + '/get' + location.pathname + location.search;\n\n\tconsole.log( 'loadData( '+url+' )' );\n\tconst response = await fetch( url );\n\n\tif (!response.ok) {\n\t\tconsole.error(\"HTTP-Error: \" + response.status);\n\t\treturn false;\n\t}\n\n\tlet format = readHeader( response.headers.get('content-type') );\n\tlet data = {};\n\n\tif( format === 'json' ){\n\t\tdata = await response.json();\n\t} else {\n\t\tdata.data = {};\n\t\tdata.data.html = await response.text();\n\t}\n\n\treturn data.data;\n}\n","import { historyStoreAdd, historyStoreReplaceLast } from './historyStore.js';\nimport { pageStoreSet } from './pageStore.js';\n\nimport { createStateObject, assumeTemplate, assumeTitle } from './utilities.js';\n\nimport { loadData } from './loadData.js';\n\nlet loading = false;\n\nexport async function navigateTo( url, target = {}, replace = false ) {\n\tif( loading === true ){\n\t\tconsole.log('navigateTo() already loading');\n\t\treturn false;\n\t}\n\tif( url === window.location.href ){\n\t\treturn false;\n\t}\n\tconst href = new URL( url );\n\tif( href.host !== window.location.host ){\n\t\twindow.open( href, '_blank' );\n\t\treturn;\n\t}\n\n\tloading = true;\n\n\ttarget.url = url;\n\ttarget.template = target.template || assumeTemplate( href.pathname );\n\ttarget.title = target.title || assumeTitle( href );\n\n\tlet state = createStateObject( target );\n\n\t// use info provided by page object for\n\n\tpageStoreSet({...target, loading: true});\n\n\tif( replace === false ){\n\t\thistory.pushState( state, state.title, state.url);\n\t} else {\n\t\thistory.replaceState( state, state.title, state.url);\n\t}\n\n\thistoryStoreAdd( state );\n\n\t// load data\n\tlet data = await loadData( url );\n\n\tlet classlist = ['dynamic'];\n\tif( data.html ){\n\t\tdata.url = state.url;\n\t\tdata.title = state.title;\n\t\tdata.template = 'html';\n\t\tclasslist = [...classlist, 'reqular', 'black'];\n\t} else {\n\t\tstate = createStateObject( data );\n\t\t// let classlist = ['dynamic', data.theme, data.layout, data.template, data.entity, data.type, data.category ];\n\t\tclasslist = [...classlist, data.theme, data.layout, data.template, data.type, data.entity ];\n\t}\n\n\t// replace info in page object and history\n\tpageStoreSet({...data , loading: false });\n\n\t// naviWorld( entity.worlditem );\n\n\thistory.replaceState( state, data.title, data.url );\n\thistoryStoreReplaceLast( state );\n\n\tdocument.body.className = classlist.join(' ');\n\n\tloading = false;\n}\n","import { historyStoreAdd, historyStoreReplaceLast } from '../router/historyStore.js';\nimport { pageStoreReplaceProperties } from '../router/pageStore.js';\n\nimport { assumeTitle } from '../router/utilities.js';\n\nimport { loadData } from '../router/loadData.js';\n\nlet loading = false;\n\nexport async function replaceContent( url, target = {}, replace = false ) {\n\tif( loading === true ){\n\t\tconsole.log('replaceContent() already loading');\n\t\treturn false;\n\t}\n\tif( url === window.location.href ){\n\t\treturn false;\n\t}\n\n\tconsole.log('REPLAAAACE');\n\n\tconst href = new URL( url );\n\n\tloading = true;\n\tlet state = history.state;\n\n\tstate.url = url;\n\tstate.title = target.title || assumeTitle( href );\n\tstate.worlditem = target.worlditem || false;\n\n\t// use info provided by page object for\n\n\tpageStoreReplaceProperties({...target, loading: true});\n\n\tif( replace === false ){\n\t\thistoryStoreAdd( state );\n\t\thistory.pushState( state, state.title, state.url);\n\t} else {\n\t\thistoryStoreReplaceLast( state );\n\t\thistory.replaceState( state, state.title, url );\n\t}\n\n\t// load data\n\tlet data = await loadData( url );\n\n\tstate.title = data.title;\n\tstate.worlditem = data.worlditem;\n\n\twindow.goToItem( data.worlditem );\n\n\tpageStoreReplaceProperties({\n\t\t...state,\n\t\tid: data.id,\n\t\tcategory: data.category,\n\t\tkeywords: data.keywords,\n\t\tdescription: data.description,\n\t\tcontent: data.content,\n\t\tpagination: data.pagination || false,\n\t\tloading: false\n\t});\n\thistoryStoreReplaceLast( state );\n\thistory.replaceState( state, state.title, state.url );\n\n\tloading = false;\n}\n","<script>\n  import { navigateTo } from './navigateTo.js';\n  import { replaceContent } from '../liebling-house/replaceContent.js';\n\n  import { createEventDispatcher } from 'svelte';\n  const dispatch = createEventDispatcher();\n\n  export let target = {};\n\n  export let url = false;\n  export let title = false;\n  export let template = false;\n\n  target.url = url || target.url;\n  target.title = title || target.title;\n  target.template = template || target.template;\n\n  export let replace = false;\n  export let classList = '';\n  export { classList as class };\n\n  function onClick(event) {\n    if( target.worlditem && document.body.classList.contains('liebling-house') ){\n      replaceContent( target.url, target, replace);\n    } else {\n      navigateTo( target.url, target, replace);\n    }\n    dispatch('click', event);\n  }\n</script>\n\n<a href={target.url} title={target.title} class={classList} class:current={target.url === window.location.href} on:click|preventDefault={onClick}>\n\t<slot>{target.title}</slot>\n</a>\n","<script>\n  import Link from '../../router/Link.svelte';\n\n  import { onDestroy } from 'svelte';\n  import { historyStore } from '../../router/historyStore.js';\n\n  let list;\n  const unsubscribe = historyStore.subscribe(value => {\n    if( value.length > 50 ){\n\t\t\tvalue.splice(1,1);\n\t\t}\n\n    let doubles = [];\n\n\t\tfor( let i = value.length - 1; i >= 0; i--){\n\t\t\tif( doubles.includes( value[i].url) ){\n\t\t\t\tvalue[i].double = true;\n\t\t\t} else {\n        value[i].double = false;\n\t\t\t\tdoubles.push(value[i].url);\n\t\t\t}\n\t\t}\n\n\t\tlist = value;\n  });\n  onDestroy(() => {\n\t\tunsubscribe();\n\t});\n\n  let outerWidth, innerWidth;\n\n  // ← →\n</script>\n\n<nav class=\"bar history horizontal white\">\n  <h3>\n    <a href={window.location.origin} title=\"Start\" >Start</a>\n  </h3>\n  <ol bind:offsetWidth={outerWidth} class=\"{ innerWidth > outerWidth ? 'alignright' : ''}\">\n    <div bind:offsetWidth={innerWidth}>\n      {#each list as item}\n        <li class=\"{ item.double ? 'double' : ''}\">\n          <Link target={item} />\n        </li>\n      {/each}\n    </div>\n  </ol>\n</nav>\n","<script>\n  import Link from '../../router/Link.svelte';\n\n  let url = location.origin + '/archive';\n\n  export let page;\n\n</script>\n\n<nav class=\"bar archive horizontal\">\n\n  <div class=\"left\">\n    <Link {url} title=\"Archive\" template=\"archive\" />\n  </div>\n\n  {#if page.keywords}\n    <div class=\"right keywords\">\n      {#each page.keywords as keyword}\n        <Link url=\"{url+'?research='+keyword}\" template=\"archive\" title=\"{keyword}\" />\n      {/each}\n    </div>\n  {/if}\n\n</nav>\n","<script>\n  import Link from '../../router/Link.svelte';\n\n  export let item;\n  export let width = false;\n  export let info = false;\n  export let classname = '';\n\n</script>\n\n<li class=\"card {classname} {item.classlist} {width ? 'col-'+width : ''} {item.thumbnail ? '' : 'no-thumb'}\">\n\n  <Link target={item}>\n\n      <figure>\n          {#if item.thumbnail}{@html item.thumbnail}{/if}\n      </figure>\n\n      <div class=\"title\">\n\n          <span class=\"count\">{item.count || ''}</span>\n          <h4>{@html item.title}</h4>\n          {#if info}<h5>{@html info}</h5>{/if}\n\n      </div>\n\n  </Link>\n</li>\n","<script>\n\n  import Card from './card.svelte';\n\n  export let list;\n\n  export let columns = 2;\n  let columnWidth = 12 / columns;\n\n  import { beforeUpdate } from 'svelte';\n  beforeUpdate(() => {\n    columnWidth = 12 / columns;\n    if( list.length < 4 ){\n      if( columns == 2 ){\n\n        columnWidth = 12;\n\n      }\n    }\n  });\n\n</script>\n\n<ul class=\"cards grid\">\n  {#each list as item}\n\n    <Card item={item} width={columnWidth}/>\n\n  {/each}\n</ul>\n","<script>\n\n  import Card from './card.svelte';\n\n  export let list;\n  export let category = false;\n\n</script>\n\n<ul class=\"list\">\n  {#each list as item}\n\n    <Card item={item}/>\n\n  {/each}\n</ul>\n","<script>\n\n    export let transcript;\n\n    console.log( transcript );\n\n    function columnWidth(){\n        if ( transcript.en && transcript.de ){\n            return 6;\n        }\n        return 12;\n    }\n\n</script>\n\n<div class=\"transcript grid\">\n    {#if transcript.en}\n        <div class=\"en col-sm-{columnWidth()}\">\n            <h4>EN</h4>\n            {@html transcript.en}\n        </div>\n    {/if}\n    {#if transcript.de}\n        <div class=\"de col-sm-{columnWidth()}\">\n            <h4>DE</h4>\n            {@html transcript.de}\n        </div>\n    {/if}\n</div>\n","<script>\n\n\texport let view;\n\n\timport Transcript from './transcript.svelte';\n\texport let transcript = false;\n\n\texport let classname = 'preview';\n\n\tlet mediaElement;\n\n\tlet videoWidth = 0;\n\n\tlet render = true;\n\t$: { reMountVideo( view.content.srcset[0].url ) }\n\tfunction reMountVideo(){\n\t\t// console.log('remount');\n\t\trender = false;\n\t\tsetTimeout(() => render = true, 0);\n\t}\n\n\tfunction preventContextMenu( e ){\n\t\te.preventDefault();\n\t\treturn false;\n\t}\n\n</script>\n\n{#if view.content.srcset.length > 0}\n\n<section class=\"{classname} {view.type} {transcript ? '' : 'center'}\" bind:offsetWidth={videoWidth}>\n\n\t<!--<h3 class=\"section--header\" bind:offsetWidth={videoWidth}>\n\t\t{ view.headline || 'Video' }\n\t</h3>-->\n\n\t<div class=\"section--content\">\n\t\t{#if render === true}\n\t\t\t<video width=\"100%\" height=\"auto\" controls preload=\"metadata\"\n\t\t\t\ton:contextmenu={preventContextMenu} poster=\"{ view.content.poster }\" bind:this={mediaElement}>\n\n\t\t\t\t{#each view.content.srcset as source}\n\t\t\t\t\t{#if videoWidth < source.width }\n\t\t\t\t\t\t<source type=\"{source.mime}\" media=\"{source.media}\" src=\"{source.url}\" >\n\t\t\t\t\t{/if}\n\t\t\t\t{/each}\n\n\t\t\t</video>\n\t\t{/if}\n\t</div>\n\n\t{#if transcript}\n\t\t<Transcript transcript={transcript} />\n\t{/if}\n\n</section>\n\n{/if}\n","<script>\n\n\timport { beforeUpdate } from 'svelte';\n\n\texport let view;\n\n\timport Transcript from './transcript.svelte';\n\texport let transcript;\n\n\texport let classname = 'preview';\n\n\tbeforeUpdate(() => {\n\t\tif( mediaElement === false ){\n\t\t\treturn;\n\t\t}\n\t\tmediaElement.pause();\n\t});\n\n\tlet mediaElement = false;\n\n</script>\n\n<style>\n\t.section--content {\n\t\tpadding: 1rem;\n\t\talign-items: flex-end;\n\t}\n\taudio {\n\t\twidth: 100%;\n\t\toutline: none;\n\t}\n</style>\n\n<section class=\"{classname} {view.type} {transcript ? '' : 'center'}\">\n\n\t<!--<h3 class=\"section--header\">\n\t\t{ view.headline || 'Audio' }\n\t</h3>-->\n\n\t<div class=\"section--content\">\n\n\t\t<audio width=\"100%\" height=\"auto\" controls bind:this={mediaElement} preload=\"meta\" src=\"{view.content.url}\">\n\t\t</audio>\n\n\t</div>\n\n\t{#if transcript}\n\t\t<Transcript transcript={transcript} />\n\t{/if}\n\n</section>\n","<script>\n\n\timport Card from './card.svelte';\n\timport Link from '../../router/Link.svelte';\n\timport ViewVideo from '../../views/video.svelte';\n\timport ViewAudio from '../../views/audio.svelte';\n\n  export let list;\n\texport let category = '';\n\n\tlet views = {\n\t\t'video': ViewVideo,\n\t\t'audio': ViewAudio,\n\t}\n\n\texport let columns = 1;\n  let columnWidth = 12 / columns;\n\n  import { beforeUpdate } from 'svelte';\n\tbeforeUpdate(() => {\n    columnWidth = 12 / columns;\n    if( list.length < 4 ){\n      if( columns == 2 ){\n\n        columnWidth = 12;\n\n      }\n    }\n  });\n\n</script>\n\n<ul class=\"gallery { columns !== 1 ? 'grid' : ''}\">\n  {#each list as item}\n\t\t{#if category == 'tourstop' && item.worlditem !== null }\n\n\t\t\t<!-- show only as small thumbnails -->\n\t\t\t<Card item={item} classname=\"list-element\" width={columnWidth}/>\n\n\t\t{:else if item.view && ( item.view.type == 'audio' || item.view.type == 'video' )}\n\n\t\t\t<!-- play audio or video -->\n\t\t\t<li class=\"card preview {item.classlist} {columnWidth ? 'col-'+columnWidth : ''}\">\n\n\t\t\t\t<svelte:component this={views[ item.view.type ]} view={item.view}/>\n\n\t\t\t\t<Link target={item} >\n\t\t\t\t\t<div class=\"title\">\n\n\t\t\t\t\t\t\t<span class=\"count\">{item.count || ''}</span>\n\t\t\t\t\t\t\t<h4>{@html item.title}</h4>\n\n\t\t\t\t\t</div>\n\t\t\t\t</Link>\n\n\t\t\t</li>\n\n\t\t{:else}\n\n\t\t\t<Card item={item} classname=\"card-element\" width={columnWidth}/>\n\n\t\t{/if}\n  {/each}\n</ul>\n","<script>\n\timport { afterUpdate } from 'svelte';\n\timport { loadData } from '../router/loadData.js';\n\n\texport let transcript = false;\n\texport let view;\n\texport let classname;\n\n\texport let controls = false;\n\texport let columns = view.columns || 2;\n\n\timport CollectionCards from '../components/collection/cards.svelte';\n\timport CollectionList from '../components/collection/list.svelte';\n\timport CollectionsGallery from '../components/collection/gallery.svelte';\n\tlet layouts = {\n\t\tcards: CollectionCards,\n\t\tlist: CollectionList,\n\t\tgallery: CollectionsGallery\n\t}\n\texport let layout = 'cards';\n\tafterUpdate(() => {\n\t\tif( \"layout\" in view ){\n\t\t\tlayout = view.layout;\n\t\t}\n\t});\n\n\tlet loading = false;\n\n\tasync function loadNext(){\n\t\t\n\t\tloading = true;\n\n\t\tlet data = await loadData( view.next );\n\n\t\tif( data ){\n\n\t\t\tloading = false;\n\t\t\tview.next = data.next;\n\t\t\tview.content = view.content.concat( data.content );\n\n\t\t}\n\t}\n\n\tlet pageHeight = 100;\n\tlet offset = 4000;\n\tlet container = 0;\n\tlet scrollPos = 0;\n\n\tfunction scrollTrigger(){\n\t\tif( view.next === false || loading === true ){\n\t\t\treturn;\n\t\t}\n\t\tscrollPos = container.scrollTop;\n\t\tif( scrollPos > ( pageHeight - offset ) ){\n\n\t\t\tloadNext();\n\n\t\t}\n\t}\n\n</script>\n\n<style>\n\t.section--content {\n\t\tdisplay: block;\n\t}\n</style>\n\n<section class=\"{classname} {view.type}\" on:scroll|passive={scrollTrigger} bind:this={container}>\n\n\t<!--<h3 class=\"section--header\">\n\t\t{ view.headline }\n\t</h3>-->\n\n\t<div class=\"section--content\" bind:clientHeight={ pageHeight }>\n\n\t\t<svelte:component this={layouts[layout]} list={view.content} {columns}/>\n\n\t\t{#if view.next || loading === true}\n\t\t\t<div class=\"load-more\">\n\t\t\t\t{#if loading === true}\n\t\t\t\t\t<div class=\"is-loading\"></div>\n\t\t\t\t{:else}\n\t\t\t\t\t<button class=\"card\" on:click={loadNext}>Load more</button>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{/if}\n\n\t</div>\n\n\t{#if controls }\n\t\t<div class=\"bar controls\">\n\n\t\t\t<div class=\"left display\">\n\t\t\t\t<span>Display as:</span>\n\t\t\t\t<button on:click=\"{() => layout = 'cards'}\">Cards</button>\n\t\t\t\t<button on:click=\"{() => layout = 'list'}\">List</button>\n\t\t\t</div>\n\n\t\t\t<div class=\"right info\">\n\t\t\t\t<span>{view.total} Results</span>\n\t\t\t</div>\n\n\t\t</div>\n\t{/if}\n\n</section>\n","<script>\n\timport { loadData } from '../router/loadData.js';\n\n\timport { navigateTo } from '../router/navigateTo.js';\n\timport { pageStore, pageStoreReplaceProperties } from '../router/pageStore.js';\n\n\timport ViewCollection from '../views/collection.svelte';\n\timport Card from '../components/collection/card.svelte';\n\timport List from '../components/collection/list.svelte';\n\n\texport let page;\n\tlet field;\n\tlet loading = false;\n\n\tlet archive = {\n\t\tfilter: false,\n\t\tquery: '',\n\t\tprevious: {\n\t\t\turl: false\n\t\t},\n\t\turl: window.location.origin + '/archive',\n\t\twait: false,\n\t\tinput: function(){\n\t\t\tclearTimeout( this.wait );\n\t\t\tthis.wait = setTimeout(() => {\n\t\t\t\tthis.search();\n\t\t\t}, 250);\n\t\t},\n\t\tsearch: async function(){\n\t\t\tloading = true;\n\n\t\t\tlet url = this.url;\n\t\t\tif( this.filter ){\n\t\t\t\turl += '/' + encodeURIComponent( this.filter );\n\t\t\t}\n\t\t\tif( this.query ){\n\t\t\t\turl += '?research=' + encodeURIComponent( this.query );\n\t\t\t}\n\n\t\t\tif( url === this.previous.url ){\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tthis.previous.url = url;\n\t\t\t}\n\n\t\t\tconsole.log( 'search '+url );\n\n\t\t\tlet state = history.state;\n\t\t\tstate.url = url;\n\t\t\thistory.replaceState( state, state.title, state.url );\n\n\t\t\t// load data\n\t\t\tlet data = await loadData( url );\n\t\t\tpageStoreReplaceProperties({ results: data.results });\n\t\t\tloading = false;\n\n\t\t}\n\t};\n\n\tconst unsubscribe = pageStore.subscribe(value => {\n\t\t// page = value;\n\t\tif( value.archive ){\n\t\t\tif( value.archive.filter ){\n\t\t\t\tarchive.filter = value.archive.filter;\n\t\t\t}\n\t\t\tif( value.archive.query ){\n\t\t\t\tarchive.query = value.archive.query;\n\t\t\t}\n\t\t}\n\t\tif( value.loading === false ){\n\t\t\tsetTimeout(() => {\n\t\t\t\tunsubscribe();\n\t\t\t}, 5);\n\t\t}\n  });\n\n</script>\n\n<div class=\"grid panels\">\n\n\t<main class=\"panel col-sm-3\">\n\t\t<div class=\"content\">\n\n\t\t\t<header id=\"top\" class=\"tab\">\n\t\t\t\t<h1>Archive</h1>\n\n\t\t\t\t<form id=\"search\" on:click=\"{() => field.focus() }\" autocomplete=\"off\">\n\t\t\t\t\t<input class=\"input\" type=\"search\" name=\"research\"\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\tspellcheck=\"false\"\n\t\t\t\t\t\tautocorrect=\"off\"\n\t\t\t\t\t\tbind:value={archive.query}\n\t\t\t\t\t\taria-label=\"Search the archive ...\"\n\t\t\t\t\t\tplaceholder=\"Search the archive ...\"\n\t\t\t\t\t\tbind:this={field}\n\t\t\t\t\t\ton:input={() => archive.input() }>\n\t\t\t\t</form>\n\t\t\t</header>\n\n\t\t\t{#if page.archive && page.archive.filters}\n\t\t\t\t<section class=\"filters tab\">\n\t\t\t\t\t<h2>Filter</h2>\n\t\t\t\t\t<ul class=\"list\">\n\t\t\t\t\t\t{#each page.archive.filters.content as item}\n\t\t\t\t\t\t\t<li class=\"card {item.filter === archive.filter ? 'active' : ''}\">\n\t\t\t\t\t\t\t\t<button on:click={() => { archive.filter = item.filter; archive.search(); }}>\n\t\t\t\t\t\t\t\t\t<div class=\"title\">\n\n\t\t\t\t\t\t\t\t\t\t<!-- <span class=\"count\">{item.count || ''}</span> -->\n\t\t\t\t\t\t\t\t\t\t<h4>{@html item.title}</h4>\n\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</ul>\n\t\t\t\t</section>\n\t\t\t{/if}\n\n\t\t</div>\n\t</main>\n\n\t{#if loading === true || page.loading}\n\t\t<div class=\"is-loading\"></div>\n\t{/if}\n\n\t{#if page.results}\n\n\t\t{#if page.results.total === 0 && archive.query !== '' }\n\t\t\t<div class=\"panel col-sm-9 empty-results\">\n\t\t\t\tNo results for »{archive.query}«\n\t\t\t\t{#if archive.filter } in {archive.filter}{/if}\n\t\t\t</div>\n\t\t{:else}\n\t\t\t<ViewCollection view={page.results} classname=\"presentation panel col-sm-9\" controls={true} columns=3/>\n\t\t{/if}\n\n\t{/if}\n\n</div>\n","<script>\n\n    export let entity;\n    export let tab;\n    export let category;\n\n</script>\n\n<header id=\"top\" class=\"tab\">\n\n    <h1 class=\"title\">{@html tab.content.h1}</h1>\n\n    {#if tab.content.h2 }\n        <h2 class=\"subtitle\">{@html tab.content.h2}</h2>\n    {/if}\n\n    {#if tab.content.p }\n        <div class=\"highlight\">{@html tab.content.p}</div>\n    {/if}\n\n</header>\n","<script>\n\n    import Card from './card.svelte';\n\n    export let list;\n\n</script>\n\n<ul class=\"entityinfo\">\n    {#each list as item}\n\n        <Card item={item} info={item.info}/>\n\n    {/each}\n</ul>\n","<script>\n\n\texport let entity;\n\texport let tab;\n\texport let category;\n\n  import CollectionCards from '../collection/cards.svelte';\n\timport CollectionList from '../collection/list.svelte';\n\timport EntityInfo from '../collection/entityinfo.svelte';\n\timport CollectionsGallery from '../collection/gallery.svelte';\n\n\tlet layout = {\n\t\tcards: CollectionCards,\n\t\tlist: CollectionList,\n\t\tentityinfo: EntityInfo,\n\t\tgallery: CollectionsGallery\n\t}\n\n</script>\n\n<section class=\"tab collection {tab.layout}\">\n\n\t{#if tab.headline}\n    \t<h3 class=\"section--header\">{tab.headline}</h3>\n\t{/if}\n\n    <div class=\"section--content\">\n\n    \t<svelte:component this={layout[ tab.layout ]} list={tab.content} category={category}/>\n\n    </div>\n\n</section>\n","<script>\n\n  import { slide } from 'svelte/transition';\n\n  export let tab;\n  export let category;\n  export let entity;\n  import CollectionList from '../collection/list.svelte';\n\n  let open = false;\n\n  /*\n  function accordionToggle( event ){\n      let parent = event.target.closest('.accordion');\n      let content = parent.getElementsByClassName(\"section--content\")[0];\n\n      if( parent.classList.contains('open') ){\n          parent.classList.remove('open');\n          content.style.maxHeight = 0;\n      } else {\n          parent.classList.add('open');\n          content.style.maxHeight = content.scrollHeight+'px';\n      }\n  }\n  */\n\n  function cellSize( str ){\n\n      str = str.replace(/<[^>]+>/g, '');\n      if ( str.length > 160 ){\n          return 'long';\n      }\n      return '';\n\n  }\n\n  function tabClass( cl = '' ){\n      cl = cl.toLowerCase();\n      if( cl != 'meta' || entity == 'file' ){\n          open = true;\n      }\n      return cl;\n  }\n\n</script>\n\n<section class=\"tab accordion {tabClass( tab.headline )}\" class:open>\n    <h3 class=\"section--header\" on:click={() => open = !open}>{ tab.headline || 'Info' }</h3>\n    {#if open}\n      <dl class=\"section--content table\" transition:slide=\"{{ duration: 200 }}\">\n          {#each tab.content as line}\n              <div>\n\n                  {#if line.key == ''}\n                      <dt class=\"empty\">Description</dt>\n                  {:else}\n                      <dt>{line.key}</dt>\n                  {/if}\n\n                  {#if line.type && line.type == 'collection'}\n\n                      <CollectionList list={line.value} />\n\n                  {:else if Array.isArray( line.value ) }\n                      <div>\n                      {#each line.value as bit}\n                          <dd class=\"{cellSize( line.key + line.value )}\">{@html bit}</dd>\n                      {/each}\n                      </div>\n                  {:else}\n                      <dd class=\"{cellSize( line.key + line.value )}\">{@html line.value}</dd>\n                  {/if}\n\n              </div>\n          {/each}\n      </dl>\n    {/if}\n</section>\n","<script>\n\n    export let tab;\n    export let category;\n\n</script>\n\n<section class=\"tab text\">\n\n    <h3 class=\"section--header\">{ tab.headline }</h3>\n\n    <div class=\"bodytext\">{@html tab.content.html || ''}</div>\n\n</section>\n","<script>\n\n\texport let view;\n\texport let classname;\n\texport let transcript;\n\n</script>\n\n<section class=\"{classname} {view.type}\">\n\n\t<!--<h3 class=\"section--header\">\n\t\t{ view.headline || 'Preview' }\n\t</h3>-->\n\n\t<div class=\"section--content\">\n\t\t<figure>\n\t\t\t{ @html view.content.html }\n\t\t</figure>\n\t</div>\n\n</section>\n","<script>\n    import { onDestroy } from 'svelte';\n    import { createEventDispatcher } from 'svelte';\n    const dispatch = createEventDispatcher();\n\n    /**\n     * array of urls\n     */\n    export let dependencies;\n    let dependenciesLoaded = 0;\n\n    let scripts = [];\n    for (const src of dependencies) {\n        let script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = src;\n        script.async = false;\n        script.onload = function() {\n\n            dependenciesLoaded++;\n            console.log( 'Load '+dependenciesLoaded+' of '+dependencies.length+': '+src);\n            if( dependenciesLoaded < dependencies.length ){\n                return;\n            }\n\n            setTimeout(() => dispatch('loaded', {\n                loaded: true\n            }), 1);\n        };\n        document.body.appendChild(script);\n        scripts.push( script );\n    }\n\n    onDestroy(() => {\n        for (const script of scripts) {\n            console.log( 'Remove script '+script.src );\n            script.remove();\n        }\n        scripts = [];\n    });\n</script>\n","<script>\n\timport LoadScript from '../helpers/loadScript.svelte';\n\tconst dependencies = [\n\t\t\"https://api.mapbox.com/mapbox-gl-js/v1.2.0/mapbox-gl.js\"\n\t];\n\n\texport let view;\n\texport let classname;\n\n\t/*\n\t* mapbox api\n\t* https://docs.mapbox.com/mapbox-gl-js/api/\n\t* someone mixed up lat <-> lon, i dont know, just try, error, fix\n\t*/\n\n\tvar map;\n\n\tlet mapPositions = {\n\t\tlat: 25,\n\t\tlon: 30,\n\t\tzoom: 1\n\t};\n\n\tconst mapstyles = {\n\t\tdark: 'mapbox://styles/moriwaan/cjzqsxone04y21ctdxp1dgogb',\n\t\tlight: 'mapbox://styles/moriwaan/ck3njz1ds2lgm1cqp2poywa3i'\n\t};\n\n\tlet loaded = false;\n\n\tlet popups = {\n\t\tvisible: false,\n\t\tthreshold: 16,\n\t\telements: [],\n\t\tshow: function(){\n\n\t\t\tconsole.log('show()');\n\n\t\t\tlet els = this.elements;\n\n\t\t\tview.content.forEach(function(marker) {\n\n\t\t\t\tlet item = marker.properties;\n\t\t\t\tlet html = '<li class=\"card\">'+\n\t\t\t\t\t'<a onclick=\"navi(event)\" href=\"'+item.url+'\" data-template=\"'+item.template+'\">';\n\t\t\t\t\t\tif(item.thumbnail){\n\t\t\t\t\t\t\thtml +='<figure>' + item.thumbnail + '</figure>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\thtml += '<div class=\"title\">';\n\t\t\t\t\t\t\thtml += '<span class=\"count\">' + ( item.count || 1 ) + '</span>';\n\t\t\t\t\t\t\thtml += '<h4>'+item.title+'</h4>';\n\t\t\t\t\t\thtml += '</div>';\n\t\t\t\t\thtml += '</a>';\n\t\t\t\thtml += '</li>';\n\n\t\t\t\tvar popup = new mapboxgl.Popup({ closeOnClick: false, closeButton: false, anchor: 'bottom-left' })\n\t\t\t\t\t.setLngLat( marker.geometry.coordinates )\n\t\t\t\t\t.setHTML( html )\n\t\t\t\t\t.addTo( map );\n\t\t\t\tels.push( popup );\n\n\t\t\t});\n\t\t\tthis.visible = true;\n\n\t\t},\n\t\thide: function(){\n\t\t\tfor (const popup of this.elements) {\n\t\t\t\tpopup.remove();\n\t\t\t}\n\t\t\tthis.elements = [];\n\t\t\tthis.visible = false;\n\t\t}\n\t};\n\n\tfunction mapInit(){\n\n\t\tconsole.log('mapInit');\n\n\t\tmapboxgl.accessToken = 'pk.eyJ1IjoibW9yaXdhYW4iLCJhIjoiY2l4cnIxNTFvMDAzZjJ3cGJ6MmpiY2ZmciJ9.KnmjmhWCBzMm-D30JdnnXg';\n\n\t\tmap = new mapboxgl.Map({\n\t\t\tcontainer: 'map',\n\t\t\tstyle: mapstyles.light,\n\t\t\tcenter: [ mapPositions.lon, mapPositions.lat ],\n\t\t\tzoom: mapPositions.zoom\n\t\t});\n\n\t\tmap.on('load', function() {\n\n\t\t\tmap.addSource(\"buildings\", {\n\t\t\t\t\"type\": \"geojson\",\n\t\t\t\t\"data\": {\n\t\t\t\t\t\"type\": \"FeatureCollection\",\n\t\t\t\t\t\"features\": view.content\n\t\t\t\t},\n\t\t\t\tcluster: true,\n\t\t\t\tclusterMaxZoom: 7, // Max zoom to cluster points on\n\t\t\t\tclusterRadius: 24 // Radius of each cluster when clustering points\n\t\t\t});\n\n\t\t\tmap.addLayer({\n\t\t\t\t\"id\": \"dots\",\n\t\t\t\t\"type\": \"circle\",\n\t\t\t\t\"source\": \"buildings\",\n\t\t\t\t\"filter\": [\"==\", \"$type\", \"Point\"],\n\t\t\t\t\"paint\": {\n\t\t\t\t\t'circle-radius': {\n\t\t\t\t\t\t'base': 5,\n\t\t\t\t\t\t// adjust radius to zoom level [[zoom, radius],...]\n\t\t\t\t\t\t'stops': [ [2, 18], [6, 12], [8, 5], [10, 4], [13, 4], [16, 8], [22, 180] ]\n\t\t\t\t\t},\n\t\t\t\t\t'circle-color': '#00f'\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tloaded = true;\n\n\t\t});\n\n\t\tmap.on('move', function (e) {\n\t\t\tvar center = map.getCenter();\n\t\t\tmapPositions.lat = round( center.lat );\n\t\t\tmapPositions.lon = round( center.lng );\n\t\t});\n\n\t\tmap.on('zoom', function (e) {\n\t\t\tvar zoom = map.getZoom();\n\t\t\tmapPositions.zoom = round( zoom, 0 );\n\n\t\t\tif( zoom > popups.threshold && popups.visible === false ){\n\t\t\t\tpopups.show();\n\t\t\t} else if( zoom < popups.threshold && popups.visible === true ){\n\t\t\t\tpopups.hide();\n\t\t\t}\n\n\t\t});\n\n\t\tmap.on('mouseenter', 'dots', function () {\n\t\t\tmap.getCanvas().style.cursor = 'pointer';\n\t\t});\n\t\tmap.on('mouseleave', 'dots', function () {\n\t\t\tmap.getCanvas().style.cursor = '';\n\t\t});\n\n\t\tmap.on('click', 'dots', function (e) {\n\t\t\tvar features = map.queryRenderedFeatures(e.point, { layers: ['dots'] });\n\t\t\tconsole.log( features[0] );\n\t\t\tvar cluster_id = features[0].properties.cluster_id;\n\t\t\tif( cluster_id !== undefined ){\n\t\t\t\tmap.getSource('buildings').getClusterExpansionZoom(cluster_id, function (err, zoom) {\n\t\t\t\t\t\tif (err){ return; }\n\t\t\t\t\tmap.easeTo({\n\t\t\t\t\t\tcenter: features[0].geometry.coordinates,\n\t\t\t\t\t\tzoom: zoom\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlet zoomTo = map.getZoom() + 3;\n\t\t\t\tif( zoomTo > 10 ){\n\t\t\t\t\tzoomTo = popups.threshold + 0.2;\n\t\t\t\t}\n\t\t\t\tmap.easeTo({\n\t\t\t\t\tcenter: features[0].geometry.coordinates,\n\t\t\t\t\tzoom: zoomTo\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t};\n\n\tfunction round( f, d = 2 ){\n\t\t// round coords\n\t\treturn f.toFixed(d);\n\t}\n\n</script>\n\n<style>\n\t#map {\n\t\theight: 100%;\n\t}\n\n\t/* Marker tweaks */\n\n\t#map :global(.mapboxgl-popup-content) {\n\t\tbackground-color: transparent;\n\t\tborder-radius: 0;\n\t\tpadding: 0;\n\t}\n\n\t#map :global(.mapboxgl-popup > .mapboxgl-popup-tip) {\n\t\tdisplay: none;\n\t}\n\n</style>\n\n<LoadScript on:loaded={mapInit} dependencies={dependencies}/>\n<svelte:head>\n\t<link href=\"https://api.mapbox.com/mapbox-gl-js/v1.2.0/mapbox-gl.css\" rel=\"stylesheet\">\n</svelte:head>\n\n<section class=\"{classname} {view.type}\">\n\n\t<!--<h3 class=\"section--header\">\n\t\t{ view.headline || 'Map' }\n\t</h3>-->\n\n\t<div class=\"section--content\">\n\t\t<div id='map' style='width: 100%; height: 100%;'></div>\n\t</div>\n\n\t<div class=\"section--controls bar controls\" id=\"map-controls\">\n\t\t{#if loaded === false }\n\t\t\t<span class=\"message\">Loading...</span>\n\t\t{:else}\n\t\t\t<span class=\"right\">\n\t\t\t\t<span class=\"map-position\">{mapPositions.lat}, {mapPositions.lon}, {mapPositions.zoom}</span>\n\t\t\t</span>\n\t\t{/if}\n\t</div>\n\n</section>\n","<script>\n\n\timport LoadScript from '../helpers/loadScript.svelte';\n\tconst dependencies = [\n\t\t\"https://documentary-architecture.fra1.digitaloceanspaces.com/cda/assets/js/three.min.js\",\n\t\t\"https://documentary-architecture.fra1.digitaloceanspaces.com/cda/assets/js/inflate.min.js\",\n\t\t\"https://documentary-architecture.fra1.digitaloceanspaces.com/cda/assets/js/FBXLoader.js\",\n\t\t\"https://documentary-architecture.fra1.digitaloceanspaces.com/cda/assets/js/OrbitControls.js\",\n\t];\n\n\texport let view;\n\texport let classname;\n\n\tvar loaded = false;\n\n\tvar cameraRotation = {\n\t\tx: 0,\n\t\ty: 0,\n\t\tz: 0\n\t};\n\n\tvar autoRotate = true;\n\n\t/*\n\t* this code should best be outsourced, babelized and embedded here\n\t*/\n\n\tvar windowHalfX = window.innerWidth / 2;\n\tvar windowHalfY = window.innerHeight / 2;\n\n\tvar camera, scene, renderer, controls, object;\n\n\tvar container, containerWidth, containerHeight;\n\n\tfunction threeInit(){\n\n\t\tcontainer = document.getElementById( 'view-3d' );\n\n\t\tcontainerWidth = container.parentElement.offsetWidth;\n\t\tcontainerHeight = container.parentElement.offsetHeight;\n\n\t\tinit();\n\t\tanimate();\n\n\t}\n\n\tfunction init() {\n\n\t\t// console.log('init');\n\n\t\t// camera\n\t\tcamera = new THREE.PerspectiveCamera( 45, containerWidth / containerHeight, 1, 10000 );\n\t\tcamera.position.set( 50, 50, 50 );\n\n\t\t// scene\n\t\tscene = new THREE.Scene();\n\n\t\t// 0.4\n\t\tvar ambientLight = new THREE.AmbientLight( 0xcccccc, 0.5 );\n\t\tscene.add( ambientLight );\n\n\t\t// 0.8\n\t\tvar pointLight = new THREE.PointLight( 0xffffff, 0.8 );\n\t\tcamera.add( pointLight );\n\t\tscene.add( camera );\n\n\n\t\t// model\n\t\tvar loader = new THREE.FBXLoader();\n\t\tloader.load( view.content.url, function ( object ) {\n\n\t\t\tloaded = true;\n\t\t\tscene.add( object );\n\t\t\tcontrols.autoRotate = true;\n\n\t\t}, undefined, function ( e ) {\n\t\t\tconsole.error( e );\n\t\t});\n\n\t\t// renderer\n\t\trenderer = new THREE.WebGLRenderer();\n\t\trenderer.setPixelRatio( window.devicePixelRatio );\n\t\trenderer.setSize( containerWidth, containerHeight );\n\n\t\tcontainer.appendChild( renderer.domElement );\n\n\t\t// controls\n\t\tcontrols = new THREE.OrbitControls( camera, renderer.domElement );\n\t\tcontrols.target.set( 0, 0, 0 );\n\t\tcontrols.autoRotate = false;\n\t\tcontrols.update();\n\n\t\t// add guidelines\n\t\tvar materialBlue = new THREE.LineBasicMaterial( { color: 0x0000ff } );\n\t\tvar geometryGuides = new THREE.Geometry();\n\t\tgeometryGuides.vertices.push( new THREE.Vector3( 20, 0, 0) );\n\t\tgeometryGuides.vertices.push( new THREE.Vector3( 0, 0, 0) );\n\t\tgeometryGuides.vertices.push( new THREE.Vector3( 0, 20, 0) );\n\t\tgeometryGuides.vertices.push( new THREE.Vector3( 0, 0, 0) );\n\t\tgeometryGuides.vertices.push( new THREE.Vector3( 0, 0, 20) );\n\t\tvar line = new THREE.Line( geometryGuides, materialBlue );\n\t\tscene.add( line );\n\n\t\t// events\n\t\twindow.addEventListener( 'resize', onWindowResize, false );\n\n\t}\n\t/**\n\t * interactions\n\t */\n\tfunction onWindowResize() {\n\n\t\tcontainerWidth = container.parentElement.offsetWidth;\n\t\tcontainerHeight = container.parentElement.offsetHeight;\n\n\t\tcamera.aspect = containerWidth / containerHeight;\n\t\tcamera.updateProjectionMatrix();\n\n\t\trenderer.setSize( containerWidth, containerHeight );\n\n\t}\n\tfunction animate() {\n\n\t\trequestAnimationFrame( animate );\n\n\t\tcontrols.update();\n\t\tcameraRotation.x = Math.round( camera.position.x );\n\t\tcameraRotation.y = Math.round( camera.position.y );\n\t\tcameraRotation.z = Math.round( camera.position.z );\n\n\t\trenderer.render( scene, camera );\n\n\t}\n\tfunction startRotation(){\n\t\tconsole.log('start 3d rotation');\n\t\tautoRotate = true;\n\t\tcontrols.autoRotate = true;\n\t}\n\tfunction stopRotation(){\n\t\tconsole.log('stop 3d rotation');\n\t\tautoRotate = false;\n\t\tcontrols.autoRotate = false;\n\t}\n\n</script>\n\n<LoadScript on:loaded={threeInit} dependencies={dependencies}/>\n\n<section class=\"{classname} {view.type}\">\n\n\t<!--<h3 class=\"section--header\">\n\t\t{ view.headline || 'Model' }\n\t</h3>-->\n\n\t<div class=\"section--content\">\n\t\t<div id=\"view-3d\"></div>\n\t</div>\n\n\t<div class=\"bar controls section--controls\" id=\"view-3d-controls\">\n\t\t{#if loaded == false }\n\t\t\t<span class=\"message\">Loading ...</span>\n\t\t{:else}\n\t\t\t<span class=\"left\">\n\t\t\t\t{#if autoRotate === true}\n\t\t\t\t\t<button class=\"3d-pause\" on:click={stopRotation}>Pause</button>\n\t\t\t\t{:else}\n\t\t\t\t\t<button class=\"3d-play\" on:click={startRotation}>Rotate</button>\n\t\t\t\t{/if}\n\t\t\t</span>\n\t\t\t<span class=\"right\">\n\t\t\t\t<span class=\"3d-rotation\">{ cameraRotation.x }, { cameraRotation.y }, { cameraRotation.z }</span>\n\t\t\t</span>\n\t\t{/if}\n\t</div>\n\n</section>\n","<script>\n\timport LoadScript from '../helpers/loadScript.svelte';\n\tconst dependencies = [\n\t\t\"https://documentary-architecture.fra1.digitaloceanspaces.com/cda/assets/js/three.min.js\",\n\t\t\"https://documentary-architecture.fra1.digitaloceanspaces.com/cda/assets/js/OrbitControls.js\",\n\t];\n\n\texport let view;\n\texport let classname;\n\texport let transcript;\n\n\t/*\n\t* this code should best be outsourced, babelized and embedded here\n\t*/\n\n\t// console.log( view.content.url )\n\n\tvar windowHalfX = window.innerWidth / 2;\n\tvar windowHalfY = window.innerHeight / 2;\n\n\tvar camera, scene, renderer, controls, object;\n\n\tvar container, containerWidth, containerHeight;\n\n\tvar autoRotate = true;\n\n\tvar loaded = false;\n\n\tvar isUserInteracting = false;\n\tvar onPointerDownPointerX = 0;\n\tvar onPointerDownPointerY = 0;\n\tvar lon = 180;\n\tvar onPointerDownLon = 180;\n\tvar lat = 0;\n\tvar onPointerDownLat = 0;\n\tvar phi = 0;\n\tvar theta = 0;\n\n\tvar boxSize = 180;\n\n\tvar cameraRotation = {\n\t\tlat: 0,\n\t\tlon: 0\n\t};\n\n\tfunction threeInit() {\n\n\t\tcontainer = document.getElementById( 'view-3d' );\n\n\t\tcontainerWidth = container.parentElement.offsetWidth;\n\t\tcontainerHeight = container.parentElement.offsetHeight;\n\n\t\tinit();\n\t\tanimate();\n\n\t}\n\n\tfunction init() {\n\n\t\t// camera\n\t\tcamera = new THREE.PerspectiveCamera( 100, containerWidth / containerHeight, 1, 1100 );\n\t\t// camera.position.set( 0, 0, 0 );\n\t\tcamera.target = new THREE.Vector3( 20, 0, 0 );\n\n\t\t// scene\n\t\tscene = new THREE.Scene();\n\n\t\t// geo\n\t\tvar geometry = new THREE.SphereGeometry( boxSize, 60, 40 );\n\t\tgeometry.scale( - 1, 1, 1 );\n\n\t\t// texture\n\t\tvar material = new THREE.MeshBasicMaterial( {\n\t\t\tmap: new THREE.TextureLoader().load(\n\t\t\t\tview.content.url,\n\t\t\t\tfunction(){\n\t\t\t\t\tloaded = true;\n\t\t\t\t},\n\t\t\t\tundefined,\n\t\t\t\tfunction(err){\n\t\t\t\t\tconsole.log('panorama loading error');\n\t\t\t\t} )\n\t\t} );\n\n\t\tobject = new THREE.Mesh( geometry, material );\n\n\t\tscene.add( object );\n\n\t\t// renderer\n\t\trenderer = new THREE.WebGLRenderer();\n\t\trenderer.setPixelRatio( window.devicePixelRatio );\n\t\trenderer.setSize( containerWidth, containerHeight );\n\n\t\tcontainer.appendChild( renderer.domElement );\n\n\t\t// events\n\t\twindow.addEventListener( 'resize', onWindowResize, false );\n\n\t\tdocument.addEventListener( 'mousedown', onDocumentMouseDown, false );\n\t\tdocument.addEventListener( 'mousemove', onDocumentMouseMove, false );\n\t\tdocument.addEventListener( 'mouseup', onDocumentMouseUp, false );\n\t\t// document.addEventListener( 'wheel', onDocumentMouseWheel, false );\n\n\t}\n\n\tfunction onWindowResize() {\n\n\t\tcontainerWidth = container.parentElement.offsetWidth;\n\t\tcontainerHeight = container.parentElement.offsetHeight;\n\n\t\t// windowHalfX = window.innerWidth / 2;\n\t\t// windowHalfY = window.innerHeight / 2;\n\n\t\tcamera.aspect = containerWidth / containerHeight;\n\t\tcamera.updateProjectionMatrix();\n\n\t\trenderer.setSize( containerWidth, containerHeight );\n\n\t}\n\n\tfunction animate() {\n\n\t\trequestAnimationFrame( animate );\n\t\tupdate();\n\n\t}\n\n\tfunction onDocumentMouseDown( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tisUserInteracting = true;\n\n\t\tonPointerDownPointerX = event.clientX;\n\t\tonPointerDownPointerY = event.clientY;\n\n\t\tonPointerDownLon = lon;\n\t\tonPointerDownLat = lat;\n\n\t}\n\n\tfunction onDocumentMouseMove( event ) {\n\n\t\tif ( isUserInteracting === true ) {\n\n\t\t\tlon = ( onPointerDownPointerX - event.clientX ) * 0.1 + onPointerDownLon;\n\t\t\tlat = ( event.clientY - onPointerDownPointerY ) * 0.1 + onPointerDownLat;\n\n\t\t}\n\n\t}\n\n\tfunction onDocumentMouseUp( event ) {\n\n\t\tisUserInteracting = false;\n\n\t}\n\t/*\n\tfunction onDocumentMouseWheel( event ) {\n\n\t\tcamera.fov += event.deltaY * 0.05;\n\t\tcamera.updateProjectionMatrix();\n\n\t}\n\t*/\n\tfunction update() {\n\n\t\tif ( isUserInteracting === false && autoRotate === true ) {\n\n\t\t\tlon += 0.09;\n\n\t\t}\n\n\t\tlat = Math.max( - 85, Math.min( 85, lat ) );\n\t\tphi = THREE.Math.degToRad( 90 - lat );\n\t\ttheta = THREE.Math.degToRad( lon );\n\n\t\tcamera.target.x = boxSize * Math.sin( phi ) * Math.cos( theta );\n\t\tcamera.target.y = boxSize * Math.cos( phi );\n\t\tcamera.target.z = boxSize * Math.sin( phi ) * Math.sin( theta );\n\n\t\tcamera.lookAt( camera.target );\n\n\t\tcameraRotation.lat = Math.round( lat );\n\t\tcameraRotation.lon = Math.round( ( lon%360 )-180 );\n\n\t\t/*\n\t\t// distortion\n\t\tcamera.position.copy( camera.target ).negate();\n\t\t*/\n\n\t\trenderer.render( scene, camera );\n\n\t}\n\n\tfunction startRotation(){\n\t\tautoRotate = true;\n\t}\n\tfunction stopRotation(){\n\t\tautoRotate = false;\n\t}\n\n\n\n</script>\n\n<LoadScript on:loaded={threeInit} dependencies={dependencies}/>\n\n<section class=\"{classname} {view.type}\">\n\n\t<!--<h3 class=\"section--header\">\n\t\t{ view.headline || 'Panorama' }\n\t</h3>-->\n\n\t<div class=\"section--content\">\n\t\t<div id=\"view-3d\"></div>\n\t</div>\n\t<div class=\"bar controls section--controls\" id=\"view-3d-controls\">\n\t\t{#if loaded == false }\n\t\t\t<span class=\"message\">Loading ...</span>\n\t\t{:else}\n\t\t\t<span class=\"left\">\n\t\t\t\t{#if autoRotate === true }\n\t\t\t\t\t<button class=\"3d-pause\" on:click={stopRotation}>Pause</button>\n\t\t\t\t{:else}\n\t\t\t\t\t<button class=\"3d-play\" on:click={startRotation}>Rotate</button>\n\t\t\t\t{/if}\n\t\t\t</span>\n\t\t\t<span class=\"right\">\n\t\t\t\t<span class=\"3d-rotation\">{ cameraRotation.lat }, { cameraRotation.lon }</span>\n\t\t\t</span>\n\t\t{/if}\n\t</div>\n\n</section>\n","<script>\n\n  /*\n  * import components\n  */\n\n  import TabHeader from '../components/tabs/header.svelte';\n\timport TabCollection from '../components/tabs/collection.svelte';\n\timport TabTable from '../components/tabs/table.svelte';\n\timport TabText from '../components/tabs/text.svelte';\n\tlet tabs = {\n\t\theader: TabHeader,\n\t\tcollection: TabCollection,\n\t\ttable: TabTable,\n\t\ttext: TabText\n  }\n\n  import ViewCollection from '../views/collection.svelte';\n\timport ViewImage from '../views/image.svelte';\n\timport ViewVideo from '../views/video.svelte';\n\timport ViewAudio from '../views/audio.svelte';\n\timport ViewMap from '../views/map.svelte';\n\timport View3d from '../views/3d.svelte';\n\timport ViewPanorama from '../views/panorama.svelte';\n\tlet views = {\n\t\t'collection': ViewCollection,\n\t\t'image': ViewImage,\n\t\t'video': ViewVideo,\n\t\t'audio': ViewAudio,\n\t\t'map': ViewMap,\n\t\t'3d': View3d,\n\t\t'panorama': ViewPanorama\n\t}\n\n\texport let page;\n\n\tfunction contentWidth( type ){\n\t\tif( type == 'file' ){\n\t\t\treturn 3;\n\t\t}\n\t\treturn 6;\n\t}\n\n  let main;\n\tvar isScrolled = false;\n\tvar isScrolledPrev = false;\n\tfunction scrolling(){\n\t\tif( main.scrollTop > 100 ){\n\t\t\tisScrolled = true;\n\t\t} else {\n\t\t\tisScrolled = false;\n\t\t}\n\t\tif( isScrolled === isScrolledPrev ){\n\t\t\treturn;\n\t\t}\n\t\tisScrolledPrev = isScrolled;\n\n\t\tif( isScrolledPrev === true ){\n\t\t\tdocument.body.classList.add('scrolled');\n\t\t} else {\n\t\t\tdocument.body.classList.remove('scrolled');\n\t\t}\n\t}\n\n</script>\n\n<div class=\"grid panels\">\n\n  {#if page.loading}<div class=\"is-loading\"></div>{/if}\n\n  {#if page.content}\n\n    <main bind:this={main} class=\"panel col-sm-{contentWidth(page.entity)}\" on:scroll|passive={scrolling}>\n\n      <div class=\"content\">\n        <div class=\"tabs\">\n          {#each page.content as tab}\n\n            <svelte:component this={tabs[ tab.type ]} {tab} category=\"{page.category}\" entity=\"{page.entity}\"/>\n\n          {/each}\n        </div>\n      </div>\n\n    </main>\n\n  {/if}\n  {#if page.view}\n\n  \t<svelte:component this={views[ page.view.type ]} view={page.view} classname=\"presentation panel col-sm-{12 - contentWidth(page.entity)}\" transcript={page.transcript || false}/>\n\n  {/if}\n</div>\n","<script>\n\n  import Link from '../router/Link.svelte';\n  export let pagination;\n\n  // ← →\n</script>\n\n<nav class=\"pagination bar controls\">\n    {#if pagination.prev }\n      <Link target={pagination.prev} replace={true}>←</Link>\n    {/if}\n\n    {#if pagination.siblings}\n      <ol>\n        {#each pagination.siblings as item, i}\n\n          <li class=\"{ item.url == pagination.current.url ? 'current' : ''}\">\n\n            <Link target={item} replace={true}>\n              <span class=\"num\">{i+1}</span>\n              <span class=\"title\">{item.title}</span>\n            </Link>\n\n          </li>\n\n        {/each}\n      </ol>\n    {/if}\n\n    {#if pagination.next }\n      <Link target={pagination.next} replace={true} >\n        <abbr title=\"Previous: {pagination.next.title}\">→</abbr>\n      </Link>\n    {:else}\n      <Link target={pagination.parent} >\n        <abbr title=\"Back to start\">Back</abbr>\n      </Link>\n    {/if}\n</nav>\n","<script>\n\n\texport let view;\n\texport let page;\n\texport let classname;\n\n\timport {replaceContent} from './replaceContent.js';\n\timport LoadScript from '../helpers/loadScript.svelte';\n\n\tconst dependencies = [\n\t\tview.content.unityLoader || \"https://documentary-architecture.fra1.digitaloceanspaces.com/cda/assets/liebling-house/Build/UnityLoader.js\"\n\t];\n\n\tconsole.log( dependencies );\n\n\t/*\n\t*\tdeprecated functions ??\n\t*/\n\twindow.worldSetState = state => {\n\t\tconsole.warn('deprecated: window.worldSetState('+state+')');\n\t\tworldCallMethod( state );\n\t}\n\twindow.goThroughGlass = event => {\n\t\tconsole.warn('deprecated: window.goThroughGlass('+event+')');\n\t\tworldCallMethod('FreeRoaming');\n\t}\n\twindow.teleportToItem = itemName => {\n\t\tconsole.warn('deprecated: window.teleportToItem('+itemName+')');\n\t\tlieblingHouseWorldInstance.SendMessage('GameManager', 'TeleportToItem', itemName );\n\t}\n\n\t/*\n\tview.content\n\t\tworlditemStart: worlditem\n\t\tworlditemsList: ./i/liebling-house/worlditems.json\n\t\tunityLoader:    ./Build/UnityLoader.js\n\t\tunityJson:      ./Build/liebling-house-world.json\n\n\t\tWeltfunktionen sind wie gehabt über `gameInstance.SendMessage('GameManager', [FUNCTION], [ARGUMENT])` erreichbar.\n\t\t- GoToItem(string itemName)\n\t\t- TeleportToItem(string itemName)\n\t\t- FreeRoaming()\n\t\t- Kiosk()\n\t\t- Dollhouse()\n\t\t- Stop() stoppt `GoToItem`\n\n\t\tVerfügbare States\n\t\t- FreeRoaming\n\t\t- MovingToItem\n\t\t- ViewingDollhouse\n\t\t- ViewingItem\n\t\t- ViewingKiosk\n\t\t- (ViewingPlatform)\n\t*/\n\n\tvar world = {\n\t\tloaded: false,\n\t\tprogress: 0,\n\t\tsetInitialState: false,\n\t\ttooltips: {\n\t\t\titem: false,\n\t\t\thelp: false\n\t\t},\n\t\troaming: \"Start exploring\",\n\t\tdollhouse: false,\n\t\thelp: \"Click on the builing to start exploring.\",\n\t\tstate: 'ViewingKiosk',\n\t\tstates: {\n\t\t\tFreeRoaming: {\n\t\t\t\troaming: false,\n\t\t\t\tdollhouse: true,\n\t\t\t\thelp: \"Use W ← A ↑ S ↓ D → to navigate and drag to rotate camera.\"\n\t\t\t},\n\t\t\tMovingToItem: {\n\t\t\t\troaming: \"Stop\",\n\t\t\t\tdollhouse: false,\n\t\t\t\thelp: false\n\t\t\t},\n\t\t\tViewingDollhouse: {\n\t\t\t\troaming: \"Continue exploring\",\n\t\t\t\tdollhouse: false,\n\t\t\t\thelp: \"Drag to rotate building or click on one of the highlighted spots.\"\n\t\t\t},\n\t\t\tViewingItem: {\n\t\t\t\troaming: \"Continue exploring\",\n\t\t\t\tdollhouse: true,\n\t\t\t\thelp: \"Click to start exploring.\"\n\t\t\t},\n\t\t\tViewingKiosk: {\n\t\t\t\troaming: \"Start exploring\",\n\t\t\t\tdollhouse: false,\n\t\t\t\thelp: \"Click on the builing to start exploring.\"\n\t\t\t},\n\t\t}\n\t};\n\n\timport { onDestroy } from 'svelte';\n\tonDestroy(() => {\n\t\tconsole.log(\"onDestroy()\");\n\t\tlieblingHouseWorldInstance.Quit(function() {\n\t\t    console.log(\"lieblingHouseWorldInstance.Quit\");\n\t\t});\n\t\tlieblingHouseWorldInstance = null;\n\t});\n\t/*\n\t* load and ini world\n\t*/\n\tfunction unityInit(){\n\t\tconsole.log(\"unityInit()\");\n\n\t\t// return;\n\n\t\t// https://docs.unity3d.com/Manual/webgl-templates.html\n\t\tlieblingHouseWorldContainer = document.getElementById('worldContainer');\n\t\tlieblingHouseWorldInstance = UnityLoader.instantiate(\n\t\t\tlieblingHouseWorldContainer,\n\t\t\tview.content.unityJson,\n\t\t\t{ onProgress: UnityProgress }\n\t\t);\n\n\t};\n\tfunction UnityProgress(lieblingHouseWorldInstance, progress) {\n\n\t\tif (!lieblingHouseWorldInstance.Module) {\n\t\t\treturn;\n\t\t}\n\n\t\tworld.progress = Math.round( progress*100 );\n\n\t\tif (progress === 1 && !lieblingHouseWorldInstance.removeTimeout) {\n\t\t\tlieblingHouseWorldInstance.removeTimeout = setTimeout(function() {\n\n\t\t\t\tworld.loaded = true;\n\t\t\t\tconsole.log('Unity loaded');\n\n\t\t\t}, 3000);\n\t\t}\n\n\t}\n\t/*\n\t* state management\n\t*/\n\tfunction worldCallMethod( state ){\n\t\tconsole.log( 'worldCallMethod('+state+')' );\n\n\t\tswitch (state) {\n\t\t\tcase 'Kiosk':\n\t\t\tcase 'Dollhouse':\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tstate = 'FreeRoaming';\n\t\t}\n\t\tlieblingHouseWorldInstance.SendMessage('GameManager', state );\n\t}\n\t/*\n\t* alias\n\t*/\n\twindow.worldCallMethod = state => {\n\t\tworldCallMethod( state );\n\t}\n\t/*\n\t* control world -> website\n\t*\n\t* onWorldReady\n\t* worldUpdateState\n\t* worldHoverItem\n\t* worldSelectItem\n\t* worldSelectTourstopOfItem\n\t*/\n\twindow.onWorldReady = () => {\n\t\tconsole.log('window.onWorldReady()');\n\n\t\tif( page === 'overview' ){\n\t\t\tworldCallMethod('Kiosk');\n\t\t} else if( view.content.worlditemStart ){\n\t\t\tconsole.log( 'could navigate to \"'+view.content.worlditemStart+'\"' );\n\t\t\tlieblingHouseWorldInstance.SendMessage('GameManager', 'TeleportToItem', view.content.worlditemStart );\n\t\t} else {\n\t\t\tworldCallMethod('Kiosk');\n\t\t}\n\n\t}\n\tlet setInitialState = false;\n\twindow.worldUpdateState = state => {\n\t\tif( setInitialState === false && state === 'FreeRoaming' ){\n\t\t\tconsole.log('window.worldUpdateState('+state+') -> window.onWorldReady()');\n\t\t\twindow.onWorldReady();\n\t\t\tsetInitialState = true;\n\t\t}\n\t\tconsole.log('window.worldUpdateState('+state+')');\n\n\t\tswitch (state) {\n\t\t\tcase 'ViewingPlatform':\n\t\t\t\tconsole.warn('deprecated: ViewingPlatform state');\n\t\t\tcase 'MovingToItem':\n\t\t\tcase 'ViewingDollhouse':\n\t\t\tcase 'ViewingItem':\n\t\t\tcase 'ViewingKiosk':\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tstate = 'FreeRoaming';\n\t\t}\n\n\t\tworld.state = state;\n\n\t\tworld.roaming = world.states[ state ].roaming;\n\t\tworld.dollhouse = world.states[ state ].dollhouse;\n\t\tworld.help = world.states[ state ].help;\n\n\t}\n\twindow.worldHoverItem = worlditemId => {\n\t\tconsole.log('window.worldHoverItem('+worlditemId+')');\n\n\t\tif( worlditemId == '' ){\n\t\t\t// console.log('worldHoverItem() mouse leave');\n\t\t\tworld.tooltips.item = false;\n\t\t} else {\n\t\t\tworld.tooltips.item = worlditemId;\n\t\t}\n\t\t// maybe highlight collection elements by id?\n\t\treturn true;\n\t}\n\twindow.worldSelectItem = worlditemId => {\n\t\tconsole.log('window.worldSelectItem('+worlditemId+')');\n\t\tif( worlditemId == '' ){\n\t\t\treturn false;\n\t\t}\n\t\t/* will directly navigate to this entity */\n\t\tshowWorlditemContent( worlditemId );\n\t\treturn true;\n\t}\n\twindow.worldSelectTourstopOfItem = tourstopId => {\n\t\tconsole.log('window.worldSelectTourstopOfItem('+tourstopId+')');\n\t\tif( tourstopId == '' ){\n\t\t\treturn false;\n\t\t}\n\t\t/* will navigate to tourstop within world */\n\t\tnaviFromWorld( tourstopId );\n\t\treturn true;\n\t}\n\t/*\n\t* loading content\n\t*/\n\tasync function showWorlditemContent(worlditemId){\n\t\tconsole.log('async function showWorlditemContent('+worlditemId+')');\n\n\t\tvar href = window.location.origin + '/' + worlditemId;\n\t\treplaceContent( href, {}, true);\n\t}\n\t/*\n\t* helpers\n\t*/\n\twindow.worldFreeRoaming = arg => {\n\t\tconsole.log('window.worldFreeRoaming()');\n\t\tworldCallMethod('FreeRoaming');\n\t}\n\twindow.goToItem = itemName => {\n\t\tconsole.log('window.goToItem('+itemName+')');\n\t\tlieblingHouseWorldInstance.SendMessage('GameManager', 'GoToItem', itemName );\n\t}\n\tfunction canvasClick(){\n\t\tconsole.log('canvasClick()');\n\t\tif( world.state === 'Kiosk '){\n\t\t\tworldCallMethod('FreeRoaming');\n\t\t}\n\t}\n</script>\n\n<style>\n\t.hover {\n\t\t/* cursor: help; */\n\t\tbackground-color: #66f;\n\t}\n\t.section--content {\n\t\tposition: relative;\n\t}\n\t.is-loading {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground-color: #000;\n\t\t/* z-index: 30; */\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t}\n\t.is-loading:after {\n\t\tbackground-color: #fff;\n\t}\n</style>\n\n<LoadScript on:loaded={unityInit} dependencies={dependencies}/>\n\n<section class=\"{classname} {view.type}\">\n\n\t<div class=\"section--content\" id=\"view-liebling-house\">\n\t\t<div id=\"worldContainer\" class=\"presentation-container\" on:click=\"{canvasClick}\"></div>\n\t\t{#if world.loaded === false }\n\t\t\t<div class=\"is-loading\"></div>\n\t\t{/if}\n\t</div>\n\n\t<div class=\"bar controls section--controls {world.tooltips.item ? 'hover' : ''}\" id=\"view-liebling-house-controls\">\n\t\t{#if world.loaded === false }\n\t\t\t<span class=\"message\">Loading {world.progress}% ... Please wait.</span>\n\t\t{:else}\n\n\t\t\t{#if world.tooltips.item !== false}\n\t\t\t\t<span class=\"message\">{world.tooltips.item}</span>\n\t\t\t{:else if world.help !== false }\n\n\t\t\t\t<span class=\"message\">{world.help}</span>\n\n\t\t\t\t<span class=\"right\">\n\t\t\t\t\t{#if world.roaming }\n\n\t\t\t\t\t\t<button on:click={() => worldCallMethod('FreeRoaming')}>{world.roaming}</button>\n\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#if world.dollhouse }\n\n\t\t\t\t\t\t<button on:click={() => worldCallMethod('Dollhouse')}>Overview</button>\n\n\t\t\t\t\t{/if}\n\t\t\t\t</span>\n\n\t\t\t{/if}\n\n\t\t{/if}\n\n\t</div>\n\n</section>\n","<script>\n\n  /*\n  * import components\n  */\n\n  import Link from '../router/Link.svelte';\n  import Pagination from './pagination.svelte';\n  import TourNavigation from './tourNavigation.svelte';\n\n  import TabHeader from '../components/tabs/header.svelte';\n\timport TabCollection from '../components/tabs/collection.svelte';\n\timport TabTable from '../components/tabs/table.svelte';\n\timport TabText from '../components/tabs/text.svelte';\n\tlet tabs = {\n\t\theader: TabHeader,\n\t\tcollection: TabCollection,\n\t\ttable: TabTable,\n\t\ttext: TabText\n  }\n\n\timport World from './world.svelte';\n\n\texport let page;\n\n\tlet glass;\n\twindow.touchGlass = event => {\n\t\tif( page.view.type !== 'liebling-house' ){\n\t\t\treturn false;\n\t\t}\n\t\tif( event.target !== glass ){\n\t\t\treturn false;\n\t\t}\n\t\twindow.goThroughGlass();\n\t}\n\n\tfunction contentWidth( type ){\n\t\tif( type == 'file' ){\n\t\t\treturn 3;\n\t\t}\n\t\treturn 6;\n\t}\n\n\tvar isScrolled = false;\n\tvar isScrolledPrev = false;\n\tfunction scrolling(){\n\t\tif( glass.scrollTop > 100 ){\n\t\t\tisScrolled = true;\n\t\t} else {\n\t\t\tisScrolled = false;\n\t\t}\n\t\tif( isScrolled === isScrolledPrev ){\n\t\t\treturn;\n\t\t}\n\t\tisScrolledPrev = isScrolled;\n\n\t\tif( isScrolledPrev === true ){\n\t\t\tdocument.body.classList.add('scrolled');\n\t\t\t// console.log('scrolled');\n\t\t} else {\n\t\t\tdocument.body.classList.remove('scrolled');\n\t\t\t// console.log('top');\n\t\t}\n\t}\n\n  document.body.classList.add('liebling-house');\n  import { onDestroy } from 'svelte';\n\tonDestroy(() => {\n\t\tdocument.body.classList.remove('liebling-house');\n\t});\n\n</script>\n\n<div class=\"grid panels overlap\">\n\n  {#if page.content}\n    <main class=\"panel col-sm-3 {page.category}\" on:click={window.touchGlass} bind:this={glass} on:scroll|passive={scrolling}>\n      <div class=\"content\">\n\n  \t\t\t<div class=\"tabs\">\n\n          {#if page.loading}<div class=\"is-loading\"></div>{/if}\n\n  \t\t\t\t{#if page.category == 'overview'}\n  \t\t\t\t\t<TourNavigation>\n  \t\t\t\t\t\t<button class=\"blue\" on:click={window.worldFreeRoaming}>Start exploring →</button>\n  \t\t\t\t\t</TourNavigation>\n  \t\t\t\t{:else if page.category == 'tour'}\n  \t\t\t\t\t<TourNavigation>\n  \t\t\t\t\t\t<!-- <a class=\"button blue\" on:click={window.navi} href=\"{page.content[1].content[0].url}\" data-template=\"{page.content[1].content[0].template}\">Start promenade →</a> -->\n              <Link target={page.content[1].content[0]} class=\"button blue\">Start promenade →</Link>\n  \t\t\t\t\t</TourNavigation>\n  \t\t\t\t{:else if page.category == 'tourstop' && page.pagination }\n  \t\t\t\t\t<Pagination pagination={page.pagination} />\n  \t\t\t\t{/if}\n\n  \t\t\t\t{#each page.content as tab}\n\n  \t\t\t\t\t<svelte:component this={tabs[ tab.type ]} {tab} category=\"{page.category}\" entity=\"{page.entity}\"/>\n\n  \t\t\t\t{/each}\n  \t\t\t</div>\n\n      </div>\n    </main>\n  {/if}\n  {#if page.view}\n\n    <World view={page.view} page={page.category} classname=\"presentation panel col-12\" />\n\n  {/if}\n\n</div>\n","import { historyStoreRemoveLast } from './historyStore.js';\nimport { pageStoreSet } from './pageStore.js';\n\nimport { loadData } from './loadData.js';\n\nasync function navigateBack( target ) {\n\n\t// use info provided by old state object for\n\tpageStoreSet({...target, loading: true});\n\thistoryStoreRemoveLast();\n\n\tlet data = await loadData( target.url );\n\n\t// replace info in page object and history\n\tpageStoreSet({...data , loading: false });\n\n\t// naviWorld( entity.worlditem );\n\n}\n\nexport async function popState( event ){\n\n\tif( event.state ){\n\n\t\tconsole.log( 'popState('+event.state.url+')' );\n\t\tnavigateBack( event.state );\n\n\t} else {\n\n\t\tthrow Error('popState() no history.state object');\n\n\t}\n\n}\n","import { navigateTo } from './navigateTo.js';\n\nexport function clickAnyLink( event ){\n\n\tlet anchor = event.target.closest('a');\n\tif( anchor && anchor.classList.contains('follow') ){\n\t\tconsole.log('clickAnyLink',anchor);\n\t\tevent.preventDefault();\n\t\tnavigateTo( anchor.href );\n\t}\n\n}\n","<script>\n\timport { slide } from 'svelte/transition';\n\n\timport HistoryBar from './components/navigation/historyBar.svelte';\n\timport ArchiveBar from './components/navigation/archiveBar.svelte';\n\timport ArchiveTemplate from './templates/archive.svelte';\n\timport EntityTemplate from './templates/entity.svelte';\n\timport LieblingHouse from './liebling-house/template.svelte';\n\n\timport { loadPage } from './router/loadPage.js';\n\timport { popState } from './router/popState.js';\n\timport { clickAnyLink } from './router/clickAnyLink.js';\n\n\timport { onMount } from 'svelte';\n\tonMount(async () => {\n\t\tloadPage();\n\t});\n\n\tlet page = {};\n\timport { pageStore } from './router/pageStore.js';\n  const unsubscribe = pageStore.subscribe(value => {\n\t\tfor (var prop in value) {\n\t\t\tif( value[prop] !== page[prop] ){\n\t\t\t\tpage[prop] = value[prop];\n\t\t\t}\n\t\t}\n\t\t// page = value;\n\t\tconsole.log( page );\n  });\n\n</script>\n\n<svelte:window on:popstate={popState} on:click={clickAnyLink}></svelte:window>\n\n<svelte:head>\n\t<title>CDA {page.title}</title>\n</svelte:head>\n\n<HistoryBar />\n\n<!-- {#if page.loading }\n\tPage loading.<br />\n\tTitle: {page.title || '?'}<br />\n\tUrl: {page.url || '?'}<br />\n\tTemplate: {page.template || '?'}<br />\n\tWorlditem: {page.worlditem || '?'}\n{/if} -->\n\n{#if page.template === 'html' }\n\n\t<div>\n\t\t{@html page.html}\n\t</div>\n\n{:else if page.template === 'entity' }\n\n\t{#if page.view && page.view.type === 'liebling-house'}\n\t\t<LieblingHouse {page} />\n\t{:else}\n\t\t<EntityTemplate {page} />\n\t{/if}\n\n\t<ArchiveBar {page} />\n\n{:else if page.template === 'archive' }\n\n\t<ArchiveTemplate {page} />\n\n{:else}\n\n\t{#if page.loading}<div class=\"is-loading\"></div>{/if}\n\n{/if}\n","import { historyStoreAdd, historyStoreReplaceLast } from './historyStore.js';\nimport { pageStoreSet } from './pageStore.js';\n\nimport { createStateObject, assumeTemplate } from './utilities.js';\n\nimport { loadData } from './loadData.js';\n\nexport async function loadPage( url = false, title = false ) {\n\n\tlet state = createStateObject({\n\t\ttitle: title || document.title.replace('CDA ',''),\n\t\turl: url || window.location.href,\n\t\ttemplate: assumeTemplate( window.location.pathname )\n\t});\n\n\tpageStoreSet({...state, loading: true});\n\thistoryStoreAdd( state );\n\n\t// load data\n\tlet data = await loadData( state.url );\n\n\tif( data.html ){\n\t\tdata.url = state.url;\n\t\tdata.title = state.title;\n\t\tdata.template = 'html';\n\t} else {\n\t\tstate = createStateObject( data );\n\t}\n\n\t// replace info in page object and history\n\tpageStoreSet({...data, loading: false});\n\n\t// naviWorld( entity.worlditem );\n\n\thistory.replaceState( state, state.title, state.url );\n\thistoryStoreReplaceLast( state );\n\n}\n","console.log('CDA Centre for Documentary Architecture');\n\nimport App from './App.svelte';\n\nconst app = new App({\n\ttarget: document.querySelector('#frontend')\n});\n\nexport default app;\n"],"names":["noop","identity","x","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","create_slot","definition","ctx","slot_ctx","get_slot_context","$$scope","get_slot_changes","changed","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","stylesheet","running","run_tasks","task","delete","size","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","i","length","d","element","name","document","createElement","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","value","removeAttribute","setAttribute","set_data","set_input_value","input","add_resize_listener","getComputedStyle","position","style","object","win","type","tabIndex","onload","contentDocument","defaultView","test","navigator","userAgent","cancel","toggle_class","toggle","classList","custom_event","detail","e","createEvent","initCustomEvent","HtmlTag","[object Object]","html","this","u","n","t","innerHTML","Array","from","childNodes","m","current_component","active","current_rules","create_rule","duration","delay","ease","uid","step","keyframes","p","rule","str","hash","charCodeAt","head","sheet","insertRule","cssRules","animation","delete_rule","split","filter","anim","indexOf","join","deleteRule","set_current_component","component","get_current_component","Error","beforeUpdate","$$","before_update","push","onDestroy","on_destroy","createEventDispatcher","callbacks","slice","call","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","promise","update_scheduled","add_render_callback","flush","seen_callbacks","shift","update","pop","callback","has","add","fragment","dirty","after_update","dispatch","direction","kind","dispatchEvent","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","transition_out","o","null_transition","create_bidirectional_transition","params","intro","config","running_program","pending_program","animation_name","clear_animation","init","program","Math","abs","start","end","group","go","easing","tick","css","fulfil","loop","then","mount_component","on_mount","new_on_destroy","map","destroy_component","make_dirty","key","instance","create_fragment","not_equal","prop_names","parent_component","props","bound","context","Map","ready","ret","hydrate","l","SvelteComponent","$destroy","index","splice","cubicOut","f","slide","opacity","height","parseFloat","padding_top","paddingTop","padding_bottom","paddingBottom","margin_top","marginTop","margin_bottom","marginBottom","border_top_width","borderTopWidth","border_bottom_width","borderBottomWidth","min","subscriber_queue","writable","stop","subscribers","set","new_value","run_queue","s","subscribe","invalidate","subscriber","historyStore","historyStoreAdd","state","h","historyStoreReplaceLast","pageStore","title","url","location","href","pageStoreSet","pageObject","pageStoreReplaceProperties","properties","page","createStateObject","obj","template","worlditem","assumeTemplate","pathname","match","assumeTitle","matches","search","replace","async","loadData","URL","origin","console","log","response","fetch","ok","error","status","headers","get","includes","json","loading","navigateTo","host","open","history","pushState","replaceState","classlist","theme","layout","entity","body","className","replaceContent","goToItem","id","category","keywords","description","content","pagination","onClick","preventDefault","contains","item","double","list","innerWidth","outerWidth","unsubscribe","doubles","keyword","thumbnail","info","count","classname","width","columnWidth","columns","transcript","en","de","render","view","srcset","poster","preventContextMenu","source","mime","media","videoWidth","mediaElement","setTimeout","pause","views","video","ViewVideo","audio","ViewAudio","loadNext","total","layouts","next","scrollTrigger","controls","offset","cards","CollectionCards","CollectionList","gallery","CollectionsGallery","concat","pageHeight","container","scrollPos","scrollTop","archive","filters","click_handler_1","results","query","field","previous","wait","clearTimeout","encodeURIComponent","tab","h2","h1","headline","entityinfo","EntityInfo","line","cellSize","bit","isArray","tabClass","cl","toLowerCase","dependencies","dependenciesLoaded","scripts","script","loaded","remove","mapPositions","lat","lon","zoom","mapInit","round","toFixed","mapstyles","dark","light","popups","visible","threshold","elements","show","els","marker","popup","mapboxgl","Popup","closeOnClick","closeButton","setLngLat","geometry","coordinates","setHTML","addTo","hide","accessToken","center","on","addSource","features","cluster","clusterMaxZoom","clusterRadius","addLayer","paint","circle-radius","base","stops","circle-color","getCenter","lng","getZoom","getCanvas","cursor","queryRenderedFeatures","point","layers","cluster_id","undefined","getSource","getClusterExpansionZoom","err","easeTo","zoomTo","cameraRotation","y","z","autoRotate","startRotation","stopRotation","threeInit","camera","scene","renderer","containerWidth","containerHeight","onWindowResize","parentElement","offsetWidth","offsetHeight","aspect","updateProjectionMatrix","setSize","animate","getElementById","THREE","PerspectiveCamera","Scene","ambientLight","AmbientLight","pointLight","PointLight","FBXLoader","load","WebGLRenderer","setPixelRatio","devicePixelRatio","domElement","OrbitControls","materialBlue","LineBasicMaterial","color","geometryGuides","Geometry","vertices","Vector3","Line","boxSize","isUserInteracting","onPointerDownPointerX","onPointerDownPointerY","onPointerDownLon","onPointerDownLat","phi","theta","max","degToRad","sin","cos","lookAt","onDocumentMouseDown","clientX","clientY","onDocumentMouseMove","onDocumentMouseUp","SphereGeometry","scale","material","MeshBasicMaterial","TextureLoader","Mesh","contentWidth","scrolling","tabs","main","header","TabHeader","collection","TabCollection","table","TabTable","TabText","ViewCollection","image","ViewImage","ViewMap","3d","View3d","panorama","ViewPanorama","isScrolled","isScrolledPrev","prev","siblings","current","parent","world","help","roaming","dollhouse","tooltips","progress","unityInit","canvasClick","worldCallMethod","lieblingHouseWorldInstance","SendMessage","unityLoader","worldSetState","warn","goThroughGlass","teleportToItem","itemName","setInitialState","states","FreeRoaming","MovingToItem","ViewingDollhouse","ViewingItem","ViewingKiosk","UnityProgress","Module","removeTimeout","Quit","onWorldReady","worlditemStart","worldUpdateState","worldHoverItem","worlditemId","worldSelectItem","showWorlditemContent","worldSelectTourstopOfItem","tourstopId","naviFromWorld","worldFreeRoaming","arg","lieblingHouseWorldContainer","UnityLoader","instantiate","unityJson","onProgress","touchGlass","glass","navigateBack","popState","clickAnyLink","closest","loadPage","prop","querySelector"],"mappings":"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"}